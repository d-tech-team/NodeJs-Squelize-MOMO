<%- include('header'); -%>
    <!-- ============================================================== -->
    <!-- Start right Content here -->
    <!-- ============================================================== -->
    <div class="main-content">

        <div class="page-content">
            <div class="container-fluid">

                <!-- start page title -->
                <div class="row">
                    <div class="col-12">
                        <div class="page-title-box d-sm-flex align-items-center justify-content-between">
                            <h4 class="mb-sm-0">Dashboard</h4>

                            <div class="page-title-right">
                                <ol class="breadcrumb m-0">
                                    <li class="breadcrumb-item"><a href="javascript: void(0);">Dashboards</a></li>
                                    <li class="breadcrumb-item active">Dashboard</li>
                                </ol>
                            </div>

                        </div>
                    </div>
                </div>
                <!-- end page title -->
                <div class="row">
                    <div class="col">

                        <div class="h-100">
                            <div class="row mb-3 pb-1">
                                <div class="col-12">
                                    <div class="d-flex align-items-lg-center flex-lg-row flex-column">
                                        <div class="flex-grow-1">
                                            <h4 class="fs-16 mb-1">Good Morning, Anna!</h4>
                                            <p class="text-muted mb-0">Here's what's happening with your store
                                                today.</p>
                                        </div>
                                        <div class="mt-3 mt-lg-0">
                                            <form action="javascript:void(0);">
                                                <div class="row g-3 mb-0 align-items-center">
                                                    <div class="col-sm-auto">
                                                        <div class="input-group">
                                                            <input type="date"
                                                                class="form-control border-0 dash-filter-picker shadow"
                                                                id="search">
                                                            <div
                                                                class="input-group-text bg-primary border-primary text-white">
                                                                <i class="ri-calendar-2-line"></i>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <!--end col-->
                                                </div>
                                                <!--end row-->
                                            </form>
                                        </div>
                                    </div><!-- end card header -->
                                </div>
                                <!--end col-->
                            </div>
                            <!--end row-->

                            <div class="row">
                                <div class="col-xl-3 col-md-6">
                                    <!-- card -->
                                    <div class="card card-animate">
                                        <div class="card-body">
                                            <div class="d-flex align-items-center">
                                                <div class="flex-grow-1 overflow-hidden">
                                                    <p class="text-uppercase fw-medium text-muted text-truncate mb-0">
                                                        Today's revenue
                                                    </p>
                                                </div>
                                                <div class="flex-shrink-0">
                                                    <h5 class="text-success fs-14 mb-0">
                                                        <i class="fs-13 align-middle"></i>

                                                    </h5>
                                                </div>
                                            </div>
                                            <div class="d-flex align-items-end justify-content-between mt-4">
                                                <div>
                                                    <h4 class="fs-22 fw-semibold ff-secondary mb-4">đ<span
                                                            id="todayRevenue">
                                                            <%= Intl.NumberFormat().format(dayRevenue) %>
                                                        </span>
                                                    </h4>

                                                </div>
                                                <div class="avatar-sm flex-shrink-0">
                                                    <span class="avatar-title bg-soft-success rounded fs-3">
                                                        <i class="bx bx-dollar-circle text-success"></i>
                                                    </span>
                                                </div>
                                            </div>
                                        </div><!-- end card body -->
                                    </div><!-- end card -->
                                </div><!-- end col -->

                                <div class="col-xl-3 col-md-6">
                                    <!-- card -->
                                    <div class="card card-animate">
                                        <div class="card-body">
                                            <div class="d-flex align-items-center">
                                                <div class="flex-grow-1 overflow-hidden">
                                                    <p class="text-uppercase fw-medium text-muted text-truncate mb-0">
                                                        Profit today</p>
                                                </div>
                                                <div class="flex-shrink-0" id="totalDay">
                                                    <h5
                                                        class="<%= dayRevenue - costDay >= 0 ? 'text-success' : 'text-danger' %> fs-14 mb-0">
                                                        <i
                                                            class="<%= dayRevenue - costDay >= 0 ? 'ri-arrow-right-up-line' : 'ri-arrow-right-down-line' %>  fs-13 align-middle"></i>
                                                        <%= Intl.NumberFormat().format(dayRevenue - costDay) %> đ
                                                    </h5>
                                                </div>
                                            </div>
                                            <div class="d-flex align-items-end justify-content-between mt-4">
                                                <div>
                                                    <h4 class="fs-22 fw-semibold ff-secondary mb-4">đ<span id="costDay">
                                                            <%= costDay %>
                                                        </span>
                                                    </h4>
                                                </div>
                                                <div class="avatar-sm flex-shrink-0">
                                                    <span class="avatar-title bg-soft-info rounded fs-3">
                                                        <i class="bx bx-shopping-bag text-info"></i>
                                                    </span>
                                                </div>
                                            </div>
                                        </div><!-- end card body -->
                                    </div><!-- end card -->
                                </div><!-- end col -->

                                <div class="col-xl-3 col-md-6">
                                    <!-- card -->
                                    <div class="card card-animate">
                                        <div class="card-body">
                                            <div class="d-flex align-items-center">
                                                <div class="flex-grow-1 overflow-hidden">
                                                    <p class="text-uppercase fw-medium text-muted text-truncate mb-0">
                                                        Month's revenue
                                                    </p>
                                                </div>

                                            </div>
                                            <div class="d-flex align-items-end justify-content-between mt-4">
                                                <div>
                                                    <h4 class="fs-22 fw-semibold ff-secondary mb-4">đ<span
                                                            id="monthRevenue">
                                                            <%= Intl.NumberFormat().format(monthRevenue) %>
                                                        </span>
                                                    </h4>
                                                </div>
                                                <div class="avatar-sm flex-shrink-0">
                                                    <span class="avatar-title bg-soft-warning rounded fs-3">
                                                        <i class="bx bx-user-circle text-warning"></i>
                                                    </span>
                                                </div>
                                            </div>
                                        </div><!-- end card body -->
                                    </div><!-- end card -->
                                </div><!-- end col -->

                                <div class="col-xl-3 col-md-6">
                                    <!-- card -->
                                    <div class="card card-animate">
                                        <div class="card-body">
                                            <div class="d-flex align-items-center">
                                                <div class="flex-grow-1 overflow-hidden">
                                                    <p class="text-uppercase fw-medium text-muted text-truncate mb-0">
                                                        Profit month</p>
                                                </div>
                                                <div class="flex-shrink-0">
                                                    <h5 id="totalMonth"
                                                        class="<%= monthRevenue - costMonth >= 0 ? 'text-success' : 'text-danger' %> fs-14 mb-0">
                                                        <i
                                                            class="<%= monthRevenue - costMonth >= 0 ? 'ri-arrow-right-up-line' : 'ri-arrow-right-down-line' %>  fs-13 align-middle"></i>
                                                        <%= Intl.NumberFormat().format(monthRevenue - costMonth) %> đ
                                                    </h5>
                                                </div>
                                            </div>
                                            <div class="d-flex align-items-end justify-content-between mt-4">
                                                <div>
                                                    <h4 class="fs-22 fw-semibold ff-secondary mb-4">
                                                        đ<span id="costMonth">
                                                            <%= Intl.NumberFormat().format(costMonth) %>
                                                        </span>
                                                    </h4>
                                                </div>
                                                <div class="avatar-sm flex-shrink-0">
                                                    <span class="avatar-title bg-soft-primary rounded fs-3">
                                                        <i class="bx bx-wallet text-primary"></i>
                                                    </span>
                                                </div>
                                            </div>
                                        </div><!-- end card body -->
                                    </div><!-- end card -->
                                </div><!-- end col -->
                            </div> <!-- end row-->
                        </div>

                        <!-- JAVASCRIPT -->
                        <script src="assets/libs/bootstrap/js/bootstrap.bundle.min.js"></script>
                        <script src="assets/libs/simplebar/simplebar.min.js"></script>
                        <script src="assets/libs/node-waves/waves.min.js"></script>
                        <script src="assets/libs/feather-icons/feather.min.js"></script>
                        <script src="assets/js/pages/plugins/lord-icon-2.1.0.js"></script>
                        <script src="assets/js/plugins.js"></script>

                        <!-- apexcharts -->
                        <script src="assets/libs/apexcharts/apexcharts.min.js"></script>

                        <!-- Vector map-->
                        <script src="assets/libs/jsvectormap/js/jsvectormap.min.js"></script>
                        <script src="assets/libs/jsvectormap/maps/world-merc.js"></script>

                        <!--Swiper slider js-->
                        <script src="assets/libs/swiper/swiper-bundle.min.js"></script>

                        <!-- Dashboard init -->
                        <script src="assets/js/pages/dashboard-ecommerce.init.js"></script>

                        <!-- App js -->
                        <script src="assets/js/app.js"></script>
                        </body>
                        <script>

                            $('#search').change(() => {
                                const date = $('#search').val().trim();
                                const token = $('meta[name="csrf-token"]').attr('content')
                                const apiUrl = '/admin/price'

                                $.ajax({
                                    url: apiUrl,
                                    headers: {
                                        'CSRF-Token': token
                                    },
                                    method: 'POST',
                                    data: {
                                        date
                                    },
                                    success: (data) => {
                                        const { dayRevenue,
                                            costDay,
                                            monthRevenue,
                                            costMonth, } = data
                                        console.log(data);
                                        $('#todayRevenue').html(` ${Intl.NumberFormat().format(dayRevenue)}`)
                                        $('#costDay').html(` ${Intl.NumberFormat().format(costDay)}`)
                                        $('#totalDay').html(`<i
                                                            class="${dayRevenue - costDay >= 0 ? 'ri-arrow-right-up-line' : 'ri-arrow-right-down-line'}  fs-13 align-middle"></i> ${Intl.NumberFormat().format(dayRevenue - costDay)} đ`)
                                            .addClass(dayRevenue - costDay >= 0 ? 'text-success' : 'text-danger')
                                            .removeClass(dayRevenue - costDay >= 0 ? 'text-danger' : 'text-success')
                                        $('#monthRevenue').html(` ${Intl.NumberFormat().format(monthRevenue)}`)
                                        $('#costMonth').html(` ${Intl.NumberFormat().format(costMonth)}`)
                                        $('#totalMonth').html(`<i
                                                            class="${monthRevenue - costMonth >= 0 ? 'ri-arrow-right-up-line' : 'ri-arrow-right-down-line'}  fs-13 align-middle"></i> ${Intl.NumberFormat().format(monthRevenue - costMonth)} đ`)
                                            .addClass(monthRevenue - costMonth >= 0 ? 'text-success' : 'text-danger')
                                            .removeClass(monthRevenue - costMonth >= 0 ? 'text-danger' : 'text-success')
                                    }
                                })
                            })

                        </script>

                        </html>